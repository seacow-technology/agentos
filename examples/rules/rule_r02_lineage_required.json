{
  "id": "rule_r02_lineage_required",
  "type": "rule",
  "version": "0.9.0",
  "status": "draft",
  "metadata": {
    "created_at": "2026-01-25T08:29:46.646705+00:00",
    "checksum": "835cc9da8100ce482228b52e83ced3ab010051f68c0ed28e2849b30650d4a6ce",
    "is_root": true,
    "tags": [
      "lineage",
      "traceability",
      "governance"
    ]
  },
  "spec": {
    "id": "rule_r02_lineage_required",
    "type": "rule",
    "title": "All content must have lineage for activation",
    "description": "Content activation requires complete lineage information (introduced_in, derived_from, supersedes). This enforces traceability and version history.",
    "version": "0.9.0",
    "status": "active",
    "lineage": {
      "introduced_in": "v0.9",
      "derived_from": null,
      "supersedes": []
    },
    "constraints": {
      "execution": "forbidden"
    },
    "rule": {
      "severity": "block",
      "scope": {
        "applies_to_types": [
          "workflow",
          "agent",
          "command",
          "policy",
          "rule"
        ],
        "applies_to_risk": [
          "low",
          "medium",
          "high",
          "critical"
        ],
        "applies_to_phases": [
          "setup",
          "analysis",
          "design",
          "implementation",
          "validation",
          "review",
          "release",
          "operations",
          "postmortem"
        ]
      },
      "when": {
        "any_of": [
          {
            "field_missing": "lineage"
          },
          {
            "field_missing": "lineage.introduced_in"
          },
          {
            "lineage_incomplete": true
          }
        ]
      },
      "then": {
        "decision": "deny",
        "reason": "Content must have complete lineage before activation",
        "required_changes": [
          "Add lineage.introduced_in field (e.g., v0.9)",
          "Set lineage.derived_from (null for root versions)",
          "Set lineage.supersedes (empty array if none)"
        ]
      },
      "evidence_required": [
        "content_metadata",
        "lineage_validation"
      ]
    },
    "metadata": {
      "tags": [
        "lineage",
        "traceability",
        "governance"
      ],
      "author": "AgentOS Team"
    }
  }
}