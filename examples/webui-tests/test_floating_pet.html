<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FloatingPet æµ‹è¯•é¡µé¢</title>
    <link rel="stylesheet" href="http://localhost:8080/static/css/floating-pet.css?v=1">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #111827;
            margin-bottom: 24px;
        }
        .test-section {
            margin-bottom: 32px;
            padding: 20px;
            background: #f9fafb;
            border-radius: 8px;
        }
        .test-section h2 {
            color: #374151;
            margin-top: 0;
            font-size: 18px;
        }
        .test-list {
            list-style: none;
            padding: 0;
        }
        .test-list li {
            padding: 8px 0;
            color: #6B7280;
        }
        .test-list li:before {
            content: "âœ“ ";
            color: #10B981;
            font-weight: bold;
            margin-right: 8px;
        }
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        .status-success {
            background: #D1FAE5;
            color: #065F46;
        }
        .status-warning {
            background: #FEF3C7;
            color: #92400E;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¤– FloatingPet ç»„ä»¶æµ‹è¯•</h1>

        <div class="test-section">
            <h2>Phase 1: æ ¸å¿ƒç»“æ„ <span class="status-badge status-success">å·²å®Œæˆ</span></h2>
            <ul class="test-list">
                <li>FAB æŒ‰é’®å·²æ¸²æŸ“</li>
                <li>èƒŒæ™¯é®ç½©å·²åˆ›å»º</li>
                <li>é¢æ¿å·²åˆ›å»º</li>
                <li>ä»»åŠ¡ Modal å·²åˆ›å»º</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>Phase 2: æ‹–æ‹½åŠŸèƒ½ <span class="status-badge status-warning">æµ‹è¯•ä¸­</span></h2>
            <ul class="test-list">
                <li>æµ‹è¯•æ‹–æ‹½ FAB æŒ‰é’® (å³ä¸‹è§’)</li>
                <li>éªŒè¯æ‹–æ‹½é˜ˆå€¼ (5px)</li>
                <li>éªŒè¯è‡ªåŠ¨å¸è¾¹</li>
                <li>éªŒè¯ä½ç½®æŒä¹…åŒ– (åˆ·æ–°é¡µé¢)</li>
                <li>éªŒè¯è¾¹ç•Œçº¦æŸ</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>Phase 3: é¢æ¿äº¤äº’ <span class="status-badge status-warning">æµ‹è¯•ä¸­</span></h2>
            <ul class="test-list">
                <li>ç‚¹å‡» FAB æ‰“å¼€é¢æ¿</li>
                <li>ç‚¹å‡»èƒŒæ™¯é®ç½©å…³é—­é¢æ¿</li>
                <li>éªŒè¯é¢æ¿ä½ç½® (è·Ÿéš FAB)</li>
                <li>éªŒè¯æ‰“å¼€/å…³é—­åŠ¨ç”»</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>Phase 4: å¿«æ·å…¥å£ <span class="status-badge status-warning">æµ‹è¯•ä¸­</span></h2>
            <ul class="test-list">
                <li>æµ‹è¯• Chat æŒ‰é’®è·³è½¬</li>
                <li>æµ‹è¯• Task æŒ‰é’® (æ‰“å¼€ Modal)</li>
                <li>æµ‹è¯•ä»»åŠ¡åˆ›å»ºåŠŸèƒ½</li>
                <li>æµ‹è¯• RAG æŒ‰é’®è·³è½¬</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>Phase 5: åŠ¨ç”»æ•ˆæœ <span class="status-badge status-success">å·²å®Œæˆ</span></h2>
            <ul class="test-list">
                <li>å® ç‰© Idle åŠ¨ç”» (å‘¼å¸æ•ˆæœ)</li>
                <li>å® ç‰© Hover åŠ¨ç”» (åŠ é€Ÿè·³åŠ¨)</li>
                <li>é¢æ¿æ‰“å¼€/å…³é—­åŠ¨ç”»</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>Phase 6: å“åº”å¼è®¾è®¡ <span class="status-badge status-warning">æµ‹è¯•ä¸­</span></h2>
            <ul class="test-list">
                <li>ç§»åŠ¨ç«¯é€‚é… (< 768px)</li>
                <li>çª—å£ Resize å¤„ç†</li>
                <li>é”®ç›˜æ”¯æŒ (Esc / Alt+P)</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>æµ‹è¯•æŒ‡å—</h2>
            <ol style="color: #374151; padding-left: 20px;">
                <li><strong>æ‹–æ‹½æµ‹è¯•</strong>: é•¿æŒ‰ FAB æŒ‰é’®å¹¶æ‹–åŠ¨,æ¾æ‰‹ååº”è‡ªåŠ¨å¸è¾¹</li>
                <li><strong>é¢æ¿æµ‹è¯•</strong>: è½»ç‚¹ FAB æŒ‰é’®æ‰“å¼€é¢æ¿,éªŒè¯å® ç‰©åŠ¨ç”»</li>
                <li><strong>å¿«æ·å…¥å£æµ‹è¯•</strong>: ç‚¹å‡» Chat/Task/RAG æŒ‰é’®</li>
                <li><strong>é”®ç›˜æµ‹è¯•</strong>: æŒ‰ Esc å…³é—­é¢æ¿,æŒ‰ Alt+P æ‰“å¼€é¢æ¿</li>
                <li><strong>æŒä¹…åŒ–æµ‹è¯•</strong>: æ‹–åŠ¨ FAB ååˆ·æ–°é¡µé¢,éªŒè¯ä½ç½®ä¿æŒ</li>
                <li><strong>å“åº”å¼æµ‹è¯•</strong>: ç¼©æ”¾æµè§ˆå™¨çª—å£,éªŒè¯å¸ƒå±€é€‚é…</li>
            </ol>
        </div>

        <div class="test-section">
            <h2>æ§åˆ¶å°æ—¥å¿—</h2>
            <p style="color: #6B7280;">æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—:</p>
            <ul style="color: #6B7280; padding-left: 20px;">
                <li><code>FloatingPet: Initializing...</code></li>
                <li><code>FloatingPet: Initialized successfully</code></li>
                <li><code>FloatingPet: Loaded saved position: {...}</code></li>
            </ul>
        </div>
    </div>

    <!-- Mock API Client for testing -->
    <script>
        // Mock Toast Manager
        window.showToast = function(message, type, duration) {
            console.log(`[Toast] ${type.toUpperCase()}: ${message}`);
            const toast = document.createElement('div');
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 24px;
                background: ${type === 'success' ? '#10B981' : type === 'error' ? '#EF4444' : '#3B82F6'};
                color: white;
                border-radius: 8px;
                z-index: 99999;
                animation: slideIn 0.3s;
            `;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), duration || 3000);
        };

        // Mock Navigation
        window.navigateToView = function(view, filters) {
            console.log(`[Navigation] Navigating to: ${view}`, filters);
            window.showToast(`Navigating to ${view}...`, 'info', 2000);
        };

        // Mock API Client
        window.apiClient = {
            post: async function(url, data) {
                console.log(`[API] POST ${url}`, data);
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve({
                            ok: true,
                            data: {
                                id: 'task_' + Date.now(),
                                description: data.description,
                                status: 'pending',
                            }
                        });
                    }, 1000);
                });
            }
        };
    </script>

    <!-- FloatingPet Component -->
    <script src="http://localhost:8080/static/js/components/FloatingPet.js?v=1"></script>

    <!-- Initialize FloatingPet -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Initializing FloatingPet...');
            window.floatingPet = new FloatingPet({
                petType: 'default',
                enableShortcuts: true,
                initialPosition: 'bottom-right',
                dragThreshold: 5,
                snapToEdge: true
            });
            console.log('FloatingPet initialized:', window.floatingPet);
        });
    </script>
</body>
</html>
